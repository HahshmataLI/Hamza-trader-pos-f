 <div class="space-y-6">
      <!-- Header -->
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
        <div>
          <h1 class="text-2xl font-bold text-gray-900">Categories</h1>
          <p class="text-gray-600">Manage your product categories and hierarchy</p>
        </div>
        <p-button 
          *ngIf="authService.hasAnyRole(['admin', 'manager'])"
          label="Add Category" 
          icon="pi pi-plus" 
          [routerLink]="['/categories', 'new']"
        />
      </div>

      <!-- Categories Table -->
      <p-card>
        <p-table 
          [value]="categories()" 
          [loading]="loading()"
          [paginator]="true" 
          [rows]="10"
          [rowsPerPageOptions]="[5, 10, 20, 50]"
          styleClass="p-datatable-sm"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [globalFilterFields]="['name','description','level']"
        >
          <ng-template pTemplate="header">
            <tr>
              <th pSortableColumn="name">Name <p-sortIcon field="name" /></th>
              <th pSortableColumn="level">Level <p-sortIcon field="level" /></th>
              <th>Parent Category</th>
              <th>Attributes</th>
              <th pSortableColumn="isActive">Status <p-sortIcon field="isActive" /></th>
              <th>Actions</th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-category>
            <tr>
              <td class="font-semibold">{{ category.name }}</td>
              <td>
                <p-tag 
                  [value]="getLevelLabel(category.level)" 
                  [severity]="getLevelSeverity(category.level)" 
                />
              </td>
              <td>
                {{ getParentName(category) }}
              </td>
              <td>
                <p-tag 
                  [value]="category.attributes.length" 
                  severity="info" 
                />
              </td>
              <td>
                <p-tag 
                  [value]="category.isActive ? 'Active' : 'Inactive'" 
                  [severity]="category.isActive ? 'success' : 'danger'" 
                />
              </td>
              <td>
                <div class="flex space-x-2">
                  <p-button 
                    icon="pi pi-eye" 
                    severity="secondary" 
                    [text]="true" 
                    [rounded]="true"
                    [routerLink]="['/categories', category._id]"
                  />
                  <p-button 
    icon="pi pi-sitemap" 
    severity="secondary" 
    [text]="true" 
    [rounded]="true"
    [routerLink]="['/categories/tree']"
    pTooltip="View category tree"
    tooltipPosition="top"
  />
                  <p-button 
                    *ngIf="authService.hasAnyRole(['admin', 'manager'])"
                    icon="pi pi-pencil" 
                    severity="secondary" 
                    [text]="true" 
                    [rounded]="true"
                    [routerLink]="['/categories', category._id, 'edit']"
                  />
                  <p-button 
                    *ngIf="authService.hasAnyRole(['admin', 'manager']) && category.isActive"
                    icon="pi pi-trash" 
                    severity="danger" 
                    [text]="true" 
                    [rounded]="true"
                    (onClick)="confirmDelete(category)"
                  />
                </div>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="6" class="text-center py-8 text-gray-500">
                No categories found. Create your first category to get started.
              </td>
            </tr>
          </ng-template>
        </p-table>
      </p-card>
    </div>

    <p-toast />
    <p-confirmDialog />